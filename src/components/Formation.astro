---
import FormationAccordion from "./FormationAccordion.astro"
import { workExperience, education } from "../utils/formations";
---

<section class='section-content bg-gray'>
  <div class='formation-group'>
    <h3> Work experience </h3>
    {workExperience.map(experience => (
      <FormationAccordion
        title={experience.title}
        date={experience.date}
        items={experience.items}
      />
    ))}
  </div>

  <div class='formation-group'>
    <h3> Education </h3>
    {education.map(experience => (
      <FormationAccordion
        title={experience.title}
        date={experience.date}
        items={experience.items}
      />
    ))}
  </div>
</section>

<script>
  const accordions = [...document.querySelectorAll('.accordion')];
  for (const accordion of accordions) {
    const chevron = accordion.querySelector('img');
    accordion?.addEventListener('click', () => {
      const currentAriaExpandedValue = accordion.getAttribute('aria-expanded')
      const newAriaExpandedValue = currentAriaExpandedValue === 'false' ? 'true' : 'false';

      accordion.setAttribute('aria-expanded', newAriaExpandedValue);
      chevron?.setAttribute('aria-expanded', newAriaExpandedValue);
    })
  }
</script>

<style lang='scss'>
  section {
    display: flex;
    flex-direction: column;
    gap: 24px;
    padding-bottom: 20px;
    padding-top: 20px;
  }

  .formation-group {
    display: flex;
    flex-direction: column;
    gap: 16px;

    h3 {
      font-size: 26px;
      text-align: center;
    }
  }
</style>
