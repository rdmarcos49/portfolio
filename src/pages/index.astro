---
import Layout from '../layouts/Layout.astro'
import Overview from '../containers/Overview/index.astro';
import Formation from '../containers/Formation/index.astro';
import Technologies from '../containers/Technologies/index.astro';
import Objectives from '../containers/Objectives/index.astro';
import Thanks from '../containers/Thanks/index.astro';
import Footer from '../containers/Footer/index.astro';

import '../global/fonts.scss';
---

<Layout title='Roberto Marcos | Frontend Software Developer'>
	<Overview />
	<Formation />
	<Technologies />
	<Objectives />
	<Thanks />
	<Footer />
</Layout>

<script>
	const MAX_MOBILE_RES = 991;
	window.addEventListener('load', () => {
		const dialog = document.querySelector('.sidebar-wrapper');
		window.addEventListener('resize', () => {
			let timeout;

			if (!timeout) {
				timeout = setTimeout(() => {
					timeout = null;
					if (window.innerWidth > MAX_MOBILE_RES && dialog?.open) {
						dialog?.close();
					}
				}, 100);
			}
		}, false);
	})
</script>

<script>
	window.addEventListener('load', () => {
		const ESCAPE_KEY = 'Escape';
		const modalDialog = document.querySelector('.myself-wrapper');
		const sidebarDialog = document.querySelector('.sidebar-wrapper');
		window.addEventListener('keydown', (event) => {
			if (event.key === ESCAPE_KEY && sidebarDialog?.open) {
				sidebarDialog?.close();
			}

			if (event.key === ESCAPE_KEY && modalDialog?.open) {
				modalDialog?.close();
			}
		})
	})
</script>
